import{r as o,j as e}from"./index-DD3v5UYF.js";const C=({onSubmit:k,onCancel:p,initialData:n})=>{const[r,i]=o.useState("weekly"),[g,h]=o.useState(4),[l,x]=o.useState([new Date(n.date).getDay()]),[y,f]=o.useState(""),[d,u]=o.useState("occurrences"),v=(a,s,c)=>{const t=new Date(a);switch(s){case"daily":t.setDate(t.getDate()+c-1);break;case"weekly":t.setDate(t.getDate()+c*7-1);break;case"monthly":t.setMonth(t.getMonth()+c-1);break}return t.toISOString().split("T")[0]},j=()=>{const a=[],s=new Date(n.date),c=d==="endDate"?new Date(y):new Date(v(n.date,r,g));let t=new Date(s),m=0;for(;t<=c&&(d==="endDate"||m<g);){if(r==="weekly"){const b=t.getDay(),S=b===0?7:b;l.includes(S)&&(a.push({...n,date:t.toISOString().split("T")[0]}),m++)}else a.push({...n,date:t.toISOString().split("T")[0]}),m++;r==="daily"?t.setDate(t.getDate()+1):r==="weekly"?(l.length>0&&t.getDay(),t.setDate(t.getDate()+1)):r==="monthly"&&t.setMonth(t.getMonth()+1)}return a},w=a=>{a.preventDefault();const s=j();k(s)},D=a=>{l.includes(a)?x(l.filter(s=>s!==a)):x([...l,a])},N=[{value:1,label:"Mån"},{value:2,label:"Tis"},{value:3,label:"Ons"},{value:4,label:"Tor"},{value:5,label:"Fre"},{value:6,label:"Lör"},{value:7,label:"Sön"}];return e.jsxs("div",{className:"bg-white dark:bg-dark-700 rounded-xl shadow-xl p-6 max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-gray-200",children:"Skapa återkommande bokning"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"Återkomst"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>i("daily"),className:`flex-1 py-2 px-3 rounded-lg ${r==="daily"?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300"}`,children:"Dagligen"}),e.jsx("button",{type:"button",onClick:()=>i("weekly"),className:`flex-1 py-2 px-3 rounded-lg ${r==="weekly"?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300"}`,children:"Veckovis"}),e.jsx("button",{type:"button",onClick:()=>i("monthly"),className:`flex-1 py-2 px-3 rounded-lg ${r==="monthly"?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300"}`,children:"Månadsvis"})]})]}),r==="weekly"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"Dagar i veckan"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(a=>e.jsx("button",{type:"button",onClick:()=>D(a.value),className:`w-10 h-10 rounded-full ${l.includes(a.value)?"bg-primary-500 text-white":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300"}`,children:a.label},a.value))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"Bokningsperiod"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"option-occurrences",name:"end-option",className:"h-4 w-4 text-primary-500 focus:ring-primary-500 dark:focus:ring-primary-400",checked:d==="occurrences",onChange:()=>u("occurrences")}),e.jsxs("div",{className:"ml-2 flex items-center",children:[e.jsx("label",{htmlFor:"option-occurrences",className:"text-gray-700 dark:text-gray-300 mr-2",children:"Upprepa"}),e.jsx("input",{type:"number",min:"1",max:"52",value:g,onChange:a=>h(parseInt(a.target.value)),className:"border rounded-md px-2 py-1 w-16 text-gray-700 dark:text-gray-200 bg-white dark:bg-dark-600 border-gray-300 dark:border-dark-500",disabled:d!=="occurrences"}),e.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:r==="daily"?"dagar":r==="weekly"?"veckor":"månader"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:"option-enddate",name:"end-option",className:"h-4 w-4 text-primary-500 focus:ring-primary-500 dark:focus:ring-primary-400",checked:d==="endDate",onChange:()=>u("endDate")}),e.jsxs("div",{className:"ml-2 flex items-center",children:[e.jsx("label",{htmlFor:"option-enddate",className:"text-gray-700 dark:text-gray-300 mr-2",children:"Slutdatum"}),e.jsx("input",{type:"date",value:y,onChange:a=>f(a.target.value),className:"border rounded-md px-2 py-1 text-gray-700 dark:text-gray-200 bg-white dark:bg-dark-600 border-gray-300 dark:border-dark-500",min:n.date,disabled:d!=="endDate"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-dark-600 dark:hover:bg-dark-500 rounded-lg transition-colors text-gray-800 dark:text-gray-200",children:"Avbryt"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 dark:bg-primary-600 dark:hover:bg-primary-700 text-white rounded-lg transition-colors shadow-soft",children:"Skapa återkommande bokning"})]})]})]})};export{C as default};
